<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="eu.europa.ec.cc.processcentre">

  <insert id="insertOrUpdateBabelTextLink">
    INSERT INTO T_BABEL_TRANSLATION_LINK (
    OBJECT_TYPE,
    OBJECT_ID,
    ATTRIBUTE_NAME,
    URN
    )  VALUES (
    #{objectType},
    #{objectId},
    #{attributeName},
    #{urn}
    )
    ON CONFLICT (OBJECT_TYPE, OBJECT_ID, ATTRIBUTE_NAME) DO UPDATE SET
    URN = EXCLUDED.URN
  </insert>

  <insert id="insertOrUpdateTranslation">
    INSERT INTO T_STATIC_TRANSLATION (
    OBJECT_TYPE,
    OBJECT_ID,
    ATTRIBUTE_NAME,
    LANGUAGE_CODE,
    TRANSLATION,
    IS_DEFAULT
    ) VALUES (
    #{objectType},
    #{objectId},
    #{attributeName},
    #{languageCode},
    #{translation},
    #{defaultTranslation},
    )
    ON CONFLICT (OBJECT_TYPE, OBJECT_ID, ATTRIBUTE_NAME, LANGUAGE_CODE) DO UPDATE SET
    TRANSLATION = EXCLUDED.TRANSLATION
    DEFAULT_TRANSLATION = EXCLUDED.DEFAULT_TRANSLATION
  </insert>

  <delete id="deleteTranslationsForAttribute">
    DELETE FROM T_STATIC_TRANSLATION WHERE OBJECT_TYPE = #{objectType} AND
    OBJECT_ID = #{objectId} AND ATTRIBUTE_NAME = #{attributeName}
  </delete>

</mapper>